# 作用域是什么

###### 作者
noone

###### 日期
2017-11-22

###### 标签
   javascript , 作用域

---

## 编译原理

在传统编译语言的流程中，程序中的一段源代码在执行 之前 会经历三个步骤，统称为“编 译”。
- 分词/词法分析（Tokenizing/Lexing）

  > 这个过程会将由字符组成的字符串分解成（对编程语言来说）有意义的代码块，这些代码块被称为词法单元（token）。例如，考虑程序 `var a = 2`; 。这段程序通常会被分解成 为下面这些词法单元： var 、 a 、 = 、 2 、 ; 。空格是否会被当作词法单元，取决于空格在这门语言中是否具有意义。
  >
  > 分词（tokenizing）和词法分析（Lexing）之间的区别是非常微妙、晦涩的， 主要差异在于词法单元的识别是通过**有状态**还是**无状态**的方式进行的。 简单来说，如果词法单元生成器在判断 a 是一个独立的词法单元还是其他词法单元的一部分时，调用的是有状态的解析规则，那么这个过程就被称为词法分析 。

- 解析/语法分析（Parsing）

  > 这个过程是将词法单元流（数组）转换成一个由元素逐级嵌套所组成的代表了程序语法结构的树。这个树被称为“抽象语法树”（Abstract Syntax Tree，AST） 。`var a = 2;` 的抽象语法树中可能会有一个叫作 VariableDeclaration 的顶级节点，接下来是一个叫作 Identifier （它的值是 a ）的子节点，以及一个叫作AssignmentExpression 的子节点。 AssignmentExpression 节点有一个叫作 NumericLiteral （它的值是 2 ）的子节点。

- 代码生成

  > 将 AST 转换为可执行代码的过程称被称为代码生成。这个过程与语言、目标平台等息息相关。
  > 抛开具体细节，简单来说就是有某种方法可以将 var a = 2; 的 AST 转化为一组机器指 令，用来 创建 一个叫作 a 的变量（包括分配内存等），并将一个值储存在 a 中。

**任何 JavaScript 代码片段在执行前都要进行编译（通常就在执行前）。**

## 理解作用域


- 引擎

  从头到尾负责整个JavaScript程序的编译及执行过程。

- 编译器

  引擎的好朋友之一，负责语法分析及代码生成等脏活累活（详见前一节的内容）。

- 作用域

  引擎的另一位好朋友， 负责收集并维护由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限。



---
[返回上级目录README.md](../README.md)
